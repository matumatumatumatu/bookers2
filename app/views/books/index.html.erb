<!-- books/index.html.erb -->
<div class="container">
  <% if @book.errors.any? %>
  <%= @book.errors.count %>件のエラーが発生しました
  <ul>
    <% @book.errors.full_messages.each do |message| %>
      <li><%= message %></li>
    <% end %>
  </ul>
<% end %>
  <div class="row">
    <div class="col-md-3">
      <%= render 'users/user_info', user: @user %>
      <div class="my-4">
        <%= render 'books/new' %>
      </div>
    </div>

    <div class="col-md-8 offset-md-1">
      <h3 class="mb-3 border-bottom">Books</h3>
      <div class="row mb-2 border-bottom">
        <div class="col-md-2">
          
        </div>
        <div class="col-md-5">
          <h5 class="pb-1 mb-2">Title</h5>
        </div>
        <div class="col-md-5">
          <h5 class="pb-1 mb-2">Opinion</h5>
        </div>
      </div>
      
  <% @books.each do |book| %>
    <div class="row mb-1"> 
      <div class="col-md-2">
        <%# ユーザー画像へのリンクを追加 %>
        <%= link_to user_path(book.user) do %>
          <% if book.image.attached? %>
            <%= image_tag book.image.variant(resize: '50x50'), class: "img-fluid rounded-circle" %>
          <% else %>
            <%= image_tag 'default-image.jpg', class: "img-fluid rounded-circle" %>
          <% end %>
        <% end %>
      </div>
      <div class="col-md-5">
        <p class="mb-1"><%= link_to book.title, book_path(book) %></p>
      </div>
      <div class="col-md-5">
        <p class="mb-1"><%= book.body %></p>
      </div>
    </div>
    <div class="row mb-1 border-bottom"></div>
  <% end %>
</div>